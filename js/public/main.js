!function(e){var t={};function n(r){if(t[r])return t[r].exports;var d=t[r]={i:r,l:!1,exports:{}};return e[r].call(d.exports,d,d.exports,n),d.l=!0,d.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)n.d(r,d,function(t){return e[t]}.bind(null,d));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/js/public/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class r{constructor(e,t,n,r){this.name=e,this.width=t,this.height=n,this.element=r}}const d="click",i="keypress",l="./img/card-front/",c="RecordList",a={BLACK_WHITE:"./img/card-back/black-white.png",HEARTSTONE_GOLD:"./img/card-back/heartstone-gold.png",LAVA_FUNNEL:"./img/card-back/lava-funnel.jpg",RED_WHITE:"./img/card-back/red-white.png",ROBOT:"./img/card-back/robot.jpg"},o={LOW:new r("low",5,2,document.getElementById("low")),MEDIUM:new r("medium",6,3,document.getElementById("medium")),HIGH:new r("high",9,4,document.getElementById("high"))},s=[],u="is-flipped";let m={currentCardBack:CARD_BACK.RED_WHITE,currentDifficulty:o.LOW,currentPlayer:null,firstCard:null,secondCard:null,cards:[],clickable:!0};function f(e){window.localStorage.getItem(e+c)||window.localStorage.setItem(e+c,JSON.stringify([]))}class g{constructor(e,t,n){this.firstName=e,this.secondName=t,this.email=n}}function p(e){let t=document.getElementById(e+"-records");t.innerHTML="";let n=document.createElement("p");n.id=e+"-records-p",n.className=n.id,n.innerText=e,t.appendChild(n);let r=e+c,d=JSON.parse(window.localStorage.getItem(r));for(let e of d){let n=document.createElement("div");n.innerHTML=`\n            <div class="record-player-name">\n                ${e.player.firstName} ${e.player.secondName}\n            </div>\n            <div class="record-player-time">\n                ${convertSecondsToMinutesWithSeconds(e.time)}\n            </div>\n        `,t.appendChild(n)}}class y{constructor(e,t,n){this.player=e,this.difficulty=t,this.time=n}}class I{constructor(e,t,n){this.divId="card-"+e,this.url=t,this.value=n,this.isInGame=!0}}function v(){let e=0;m.cards=[],document.getElementById("game-timer").innerHTML="00:00";let t=setInterval(()=>{if(++e,document.getElementById("game-timer").innerHTML=convertSecondsToMinutesWithSeconds(e),m.cards.every(e=>!e.isInGame)){clearInterval(t);let n=new y(currentPlayer,m.currentDifficulty,e),r=m.currentDifficulty.name+c,d=JSON.parse(window.localStorage.getItem(r));if(d.length<10)d.push(n),d.sort((e,t)=>e.time-t.time);else{for(let e=0;e<d.length;e++)if(n.time<=d[e].time){d.splice(e,0,n);break}d.length>10&&d.splice(-1,1)}window.localStorage.setItem(r,JSON.stringify(d)),document.getElementById("card-field").innerHTML="<h1>You are the winner!</h1>"}},1e3);document.getElementById("restart-game").addEventListener(d,()=>{clearInterval(t),v()}),document.getElementById("new-game").addEventListener(d,()=>{clearInterval(t),document.getElementById("game-field").classList.add("hidden"),document.getElementById("new-game-popup").classList.remove("hidden")}),document.getElementById("back-from-game").addEventListener(d,()=>{clearInterval(t),document.getElementById("game-field").classList.add("hidden"),document.getElementById("welcome-menu").classList.remove("hidden")}),function(){!function(){let e=1;for(let t=0;t<m.currentDifficulty.width*m.currentDifficulty.height/2;t++){let n=l+(t+1)+".png";m.cards.push(new I(e++,n,s[t])),m.cards.push(new I(e++,n,s[t]))}!function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(m.cards)}();let e=document.getElementById("card-field");e.innerHTML="";for(let t of m.cards)e.appendChild(E(t,h(e)))}()}function h(e){return parseFloat(getComputedStyle(e).width)/m.currentDifficulty.width-25}function E(e,t){let n=`\n        <div id="${e.divId}" class="card">\n            <div id="${e.divId}-front" class="card-face card-face--front"></div>\n            <div id="${e.divId}-back"class="card-face card-face--back"></div>\n        </div>\n    `,r=document.createElement("div");return r.innerHTML=n,r.className="card-scene",r.style.cssFloat="left",r.style.width=t+"px",r.style.height=10*t/8+"px",r.children[0].children[0].style.backgroundImage="url("+e.url+")",r.children[0].children[1].style.backgroundImage="url("+m.currentCardBack+")",r.addEventListener(d,function(e){let t,n;m.clickable&&e.isInGame&&(m.firstCard?(m.clickable=!1,m.secondCard=e,m.secondCard.isInGame=!1,t=document.getElementById(m.firstCard.divId),(n=document.getElementById(m.secondCard.divId)).classList.add(u),m.firstCard.value==m.secondCard.value?setTimeout(function(){n.style.opacity="0",t.style.opacity="0",m.firstCard=null,m.secondCard=null,m.clickable=!0},CARD_FLIP_TIME):setTimeout(function(){n.classList.remove(u),t.classList.remove(u),m.firstCard.isInGame=!0,m.secondCard.isInGame=!0,m.firstCard=null,m.secondCard=null,m.clickable=!0},CARD_FLIP_TIME)):(m.firstCard=e,m.firstCard.isInGame=!1,(t=document.getElementById(m.firstCard.divId)).classList.add(u)))}.bind(null,e)),r}function b(e){w(),m.currentDifficulty=e,w()}function w(){document.getElementById(m.currentDifficulty.element.id).classList.toggle("selected-difficulty")}function L(){let e=document.getElementById("first-name-input"),t=document.getElementById("second-name-input"),n=document.getElementById("email-input");(function(e,t,n){if(!e.validity.valid)return e.value="",!1;if(!t.validity.valid)return t.value="",!1;if(!n.validity.valid)return n.value="",!1;return!0})(e,t,n)&&(m.currentPlayer=new g(e.value,t.value,n.value),document.getElementById("new-game-popup").classList.toggle("hidden"),document.getElementById("game-field").classList.toggle("hidden"),v())}let B=()=>document.getElementById("current-card-back").style.backgroundImage="url("+m.currentCardBack+")",k=()=>{let e=0,t=document.getElementsByClassName("pick-card-back");for(let n in a){let r=t[e++];r.style.backgroundImage="url("+a[n]+")",r.addEventListener(d,()=>{m.currentCardBack=a[n],B()})}};function C(){!function(){let e=(e,t,n,r)=>{document.getElementById(t).addEventListener(e,n.bind(null,r))},t=e=>{let t=document.getElementById("welcome-menu"),n=document.getElementById(e);t.classList.toggle("hidden"),n.classList.toggle("hidden")};e(d,"rules-menu-item",t,"rules-popup"),e(d,"back-from-rules",t,"rules-popup"),e(i,"rules-menu-item",t,"rules-popup"),e(i,"back-from-rules",t,"rules-popup"),e(d,"new-game-menu-item",t,"new-game-popup"),e(d,"back-from-new-game",t,"new-game-popup"),e(i,"new-game-menu-item",t,"new-game-popup"),e(i,"back-from-new-game",t,"new-game-popup"),e(d,"records-menu-item",t,"records-popup"),e(d,"back-from-records",t,"records-popup"),e(i,"records-menu-item",t,"records-popup"),e(i,"back-from-records",t,"records-popup"),document.getElementById("records-menu-item").addEventListener(d,()=>{for(let e in o)p(o[e].name)})}(),function(){for(let e in o){let t=o[e];m.currentDifficulty.element.classList.add("selected-difficulty"),t.element.addEventListener(d,b.bind(null,t))}}(),function(){let e=document.getElementById("submit-new-game");e.addEventListener(d,L),e.addEventListener(i,L)}(),B(),k()}!function(){for(let e=1;e<=18;e++)s[e-1]=e;for(let e in o)f(o[e].name)}(),C()}]);